XBAR_TOP        = xbar_top
XBAR_PERI       = xbar_periph
XBAR_MAIN       = xbar_main
XBAR_2to1       = xbar_2to1
XBAR_1to2       = xbar_1to2
XBAR_ONLY_INSTR = xbar_only_instr

all: peri

top:
	rm -rf tmp
	mkdir tmp
	../opentitan/util/tlgen.py -t hjson/$(XBAR_TOP).hjson -o tmp
	cp tmp/rtl/autogen/* rtl
	rm -rf tmp

instr:
	rm -rf tmp
	mkdir tmp
	../opentitan/util/tlgen.py -t hjson/$(XBAR_ONLY_INSTR).hjson -o tmp
	cp tmp/rtl/autogen/* rtl
	rm -rf tmp

peri:
	rm -rf tmp
	mkdir tmp
	../opentitan/util/tlgen.py -t hjson/$(XBAR_PERI).hjson -o tmp
	cp tmp/rtl/autogen/* rtl
	rm -rf tmp

main:
	rm -rf tmp
	mkdir tmp
	../opentitan/util/tlgen.py -t hjson/$(XBAR_MAIN).hjson -o tmp
	cp tmp/rtl/autogen/* rtl
	rm -rf tmp

2to1:
	echo "2to1 cannot be generated by tlgen"

1to2:
	rm -rf tmp
	mkdir tmp
	../opentitan/util/tlgen.py -t hjson/$(XBAR_1to2).hjson -o tmp
	cp tmp/rtl/autogen/* rtl
	rm -rf tmp